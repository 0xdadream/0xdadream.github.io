{
    "version": "https://jsonfeed.org/version/1",
    "title": "逐梦 • All posts by \"下载\" tag",
    "description": "Welcome to my blog",
    "home_page_url": "https://0xdadream.github.io",
    "items": [
        {
            "id": "https://0xdadream.github.io/2025/05/20/yt-dlp-shi-yong/",
            "url": "https://0xdadream.github.io/2025/05/20/yt-dlp-shi-yong/",
            "title": "yt-dlp 全功能实战教程",
            "date_published": "2025-05-20T01:25:00.000Z",
            "content_html": "<h1 id=\"yt-dlp-全功能实战教程（含-TikTok-下载、脚本自动化）\"><a href=\"#yt-dlp-全功能实战教程（含-TikTok-下载、脚本自动化）\" class=\"headerlink\" title=\"yt-dlp 全功能实战教程（含 TikTok 下载、脚本自动化）\"></a>yt-dlp 全功能实战教程（含 TikTok 下载、脚本自动化）</h1><hr>\n<h2 id=\"1-🧰-工具简介\"><a href=\"#1-🧰-工具简介\" class=\"headerlink\" title=\"1. 🧰 工具简介\"></a>1. 🧰 工具简介</h2><p><code>yt-dlp</code> 是 <code>youtube-dl</code> 的增强版本，支持更多网站、功能更强大、速度更快。支持 TikTok、YouTube、Bilibili、Twitter、Instagram、Twitch 等超多站点。</p>\n<hr>\n<h2 id=\"2-⚙️-安装方法\"><a href=\"#2-⚙️-安装方法\" class=\"headerlink\" title=\"2. ⚙️ 安装方法\"></a>2. ⚙️ 安装方法</h2><h3 id=\"🪟-Windows\"><a href=\"#🪟-Windows\" class=\"headerlink\" title=\"🪟 Windows\"></a>🪟 Windows</h3><ol>\n<li>下载地址：<a href=\"https://github.com/yt-dlp/yt-dlp/releases/latest\">https://github.com/yt-dlp/yt-dlp/releases/latest</a></li>\n<li>重命名为 <code>yt-dlp.exe</code>，放入环境变量或下载目录</li>\n</ol>\n<h3 id=\"🐧-Linux-macOS\"><a href=\"#🐧-Linux-macOS\" class=\"headerlink\" title=\"🐧 Linux/macOS\"></a>🐧 Linux/macOS</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-L</span> https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp <span class=\"token parameter variable\">-o</span> /usr/local/bin/yt-dlp\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> a+rx /usr/local/bin/yt-dlp<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"3-🏁-基础用法\"><a href=\"#3-🏁-基础用法\" class=\"headerlink\" title=\"3. 🏁 基础用法\"></a>3. 🏁 基础用法</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yt-dlp <span class=\"token punctuation\">[</span>OPTIONS<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span>URL<span class=\"token operator\">&gt;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>例如：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yt-dlp https://www.tiktok.com/@xxx/video/1234567890123<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"4-🧩-参数全分类详解\"><a href=\"#4-🧩-参数全分类详解\" class=\"headerlink\" title=\"4. 🧩 参数全分类详解\"></a>4. 🧩 参数全分类详解</h2><h3 id=\"📥-下载控制\"><a href=\"#📥-下载控制\" class=\"headerlink\" title=\"📥 下载控制\"></a>📥 下载控制</h3><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>-f FORMAT</code></td>\n<td>指定视频/音频格式，如 <code>bestvideo+bestaudio</code>、<code>mp4</code></td>\n</tr>\n<tr>\n<td><code>--no-playlist</code></td>\n<td>禁止下载播放列表</td>\n</tr>\n<tr>\n<td><code>--playlist-items 1,3,5</code></td>\n<td>下载指定序号</td>\n</tr>\n<tr>\n<td><code>--max-downloads N</code></td>\n<td>最多下载 N 个视频</td>\n</tr>\n<tr>\n<td><code>--download-archive FILE</code></td>\n<td>记录已下载内容，避免重复下载</td>\n</tr>\n<tr>\n<td><code>--match-filter</code></td>\n<td>过滤下载，如 <code>duration &lt; 300</code></td>\n</tr>\n</tbody></table>\n<h3 id=\"💾-保存与命名\"><a href=\"#💾-保存与命名\" class=\"headerlink\" title=\"💾 保存与命名\"></a>💾 保存与命名</h3><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>-o \"%(title)s.%(ext)s\"</code></td>\n<td>自定义保存文件名</td>\n</tr>\n<tr>\n<td><code>--output-na-placeholder \"NA\"</code></td>\n<td>没有信息时的默认值</td>\n</tr>\n<tr>\n<td><code>--paths PATH/</code></td>\n<td>统一指定保存路径</td>\n</tr>\n</tbody></table>\n<p>支持的字段有：</p>\n<ul>\n<li><code>%(title)s</code> 视频标题</li>\n<li><code>%(uploader)s</code> 上传者</li>\n<li><code>%(id)s</code> 视频ID</li>\n<li><code>%(upload_date)s</code> 上传日期等</li>\n</ul>\n<h3 id=\"📺-视频-音频格式\"><a href=\"#📺-视频-音频格式\" class=\"headerlink\" title=\"📺 视频/音频格式\"></a>📺 视频/音频格式</h3><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>--recode-video mp4</code></td>\n<td>转换输出为 mp4</td>\n</tr>\n<tr>\n<td><code>-x</code> 或 <code>--extract-audio</code></td>\n<td>提取音频</td>\n</tr>\n<tr>\n<td><code>--audio-format mp3</code></td>\n<td>转为 mp3</td>\n</tr>\n<tr>\n<td><code>--audio-quality 0</code></td>\n<td>设置音质 0=最佳 9=最低</td>\n</tr>\n<tr>\n<td><code>--merge-output-format mp4</code></td>\n<td>视频合并输出为 mp4</td>\n</tr>\n</tbody></table>\n<h3 id=\"🌐-网络连接\"><a href=\"#🌐-网络连接\" class=\"headerlink\" title=\"🌐 网络连接\"></a>🌐 网络连接</h3><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>--proxy http://127.0.0.1:7890</code></td>\n<td>设置代理</td>\n</tr>\n<tr>\n<td><code>--user-agent UA</code></td>\n<td>模拟浏览器</td>\n</tr>\n<tr>\n<td><code>--cookies cookies.txt</code></td>\n<td>加载登录 Cookie 下载私密视频</td>\n</tr>\n<tr>\n<td><code>--source-address IP</code></td>\n<td>多网卡选择出口IP</td>\n</tr>\n<tr>\n<td><code>--limit-rate 2M</code></td>\n<td>限速</td>\n</tr>\n<tr>\n<td><code>--fragment-retries 3</code></td>\n<td>分段重试次数</td>\n</tr>\n</tbody></table>\n<h3 id=\"💬-字幕与封面\"><a href=\"#💬-字幕与封面\" class=\"headerlink\" title=\"💬 字幕与封面\"></a>💬 字幕与封面</h3><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>--write-subs</code></td>\n<td>下载字幕</td>\n</tr>\n<tr>\n<td><code>--write-auto-sub</code></td>\n<td>下载自动字幕</td>\n</tr>\n<tr>\n<td><code>--sub-lang en,zh</code></td>\n<td>多语言字幕</td>\n</tr>\n<tr>\n<td><code>--embed-subs</code></td>\n<td>将字幕嵌入视频</td>\n</tr>\n<tr>\n<td><code>--write-thumbnail</code></td>\n<td>下载封面</td>\n</tr>\n<tr>\n<td><code>--embed-thumbnail</code></td>\n<td>将封面嵌入视频文件</td>\n</tr>\n</tbody></table>\n<h3 id=\"🧾-元数据与信息\"><a href=\"#🧾-元数据与信息\" class=\"headerlink\" title=\"🧾 元数据与信息\"></a>🧾 元数据与信息</h3><table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>--write-info-json</code></td>\n<td>写出 json 格式的所有元信息</td>\n</tr>\n<tr>\n<td><code>--print \"%(title)s\"</code></td>\n<td>打印元数据信息</td>\n</tr>\n<tr>\n<td><code>--get-duration</code></td>\n<td>获取视频时长</td>\n</tr>\n<tr>\n<td><code>--get-description</code></td>\n<td>获取视频简介</td>\n</tr>\n<tr>\n<td><code>--get-filename</code></td>\n<td>获取保存路径而不下载</td>\n</tr>\n</tbody></table>\n<hr>\n<h2 id=\"5-📚-实践案例\"><a href=\"#5-📚-实践案例\" class=\"headerlink\" title=\"5. 📚 实践案例\"></a>5. 📚 实践案例</h2><h3 id=\"📽-TikTok-下载最佳视频-音频合并输出\"><a href=\"#📽-TikTok-下载最佳视频-音频合并输出\" class=\"headerlink\" title=\"📽 TikTok 下载最佳视频 + 音频合并输出\"></a>📽 TikTok 下载最佳视频 + 音频合并输出</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yt-dlp <span class=\"token parameter variable\">-f</span> bestvideo+bestaudio --merge-output-format mp4 https://www.tiktok.com/@scout2015/video/7041234567890123456<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"📂-批量下载-TikTok-视频-避免重复-封面元数据\"><a href=\"#📂-批量下载-TikTok-视频-避免重复-封面元数据\" class=\"headerlink\" title=\"📂 批量下载 TikTok 视频 + 避免重复 + 封面元数据\"></a>📂 批量下载 TikTok 视频 + 避免重复 + 封面元数据</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yt-dlp <span class=\"token parameter variable\">-a</span> tiktok_links.txt --download-archive downloaded.txt ^\n<span class=\"token parameter variable\">-o</span> <span class=\"token string\">\"Videos/%(uploader)s_%(id)s.%(ext)s\"</span> ^\n--write-thumbnail --embed-thumbnail --write-info-json ^\n--merge-output-format mp4<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"🎧-提取-TikTok-音频为-MP3\"><a href=\"#🎧-提取-TikTok-音频为-MP3\" class=\"headerlink\" title=\"🎧 提取 TikTok 音频为 MP3\"></a>🎧 提取 TikTok 音频为 MP3</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yt-dlp <span class=\"token parameter variable\">-x</span> --audio-format mp3 https://www.tiktok.com/@user/video/1234567890123<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"6-📜-批处理-Shell-脚本模板\"><a href=\"#6-📜-批处理-Shell-脚本模板\" class=\"headerlink\" title=\"6. 📜 批处理 &amp; Shell 脚本模板\"></a>6. 📜 批处理 &amp; Shell 脚本模板</h2><h3 id=\"🪟-Windows-bat\"><a href=\"#🪟-Windows-bat\" class=\"headerlink\" title=\"🪟 Windows .bat\"></a>🪟 Windows <code>.bat</code></h3><pre class=\"line-numbers language-bat\" data-language=\"bat\"><code class=\"language-bat\">@echo off\nset YTDLP=yt-dlp.exe\nset LINK_FILE=tiktok_links.txt\nset ARCHIVE=archive.txt\nset OUTPUT=Videos\n\n%YTDLP% -a %LINK_FILE% --download-archive %ARCHIVE% ^\n-o \"%OUTPUT%\\%%(uploader)s_%%(id)s.%%(ext)s\" ^\n--write-info-json --write-thumbnail --embed-thumbnail ^\n--merge-output-format mp4\npause<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"🐧-Linux-macOS-sh\"><a href=\"#🐧-Linux-macOS-sh\" class=\"headerlink\" title=\"🐧 Linux/macOS .sh\"></a>🐧 Linux/macOS <code>.sh</code></h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token assign-left variable\">LINK_FILE</span><span class=\"token operator\">=</span><span class=\"token string\">\"tiktok_links.txt\"</span>\n<span class=\"token assign-left variable\">ARCHIVE</span><span class=\"token operator\">=</span><span class=\"token string\">\"archive.txt\"</span>\n<span class=\"token assign-left variable\">OUTPUT</span><span class=\"token operator\">=</span><span class=\"token string\">\"Videos\"</span>\n\n<span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> <span class=\"token string\">\"<span class=\"token variable\">$OUTPUT</span>\"</span>\n\nyt-dlp <span class=\"token parameter variable\">-a</span> <span class=\"token string\">\"<span class=\"token variable\">$LINK_FILE</span>\"</span> --download-archive <span class=\"token string\">\"<span class=\"token variable\">$ARCHIVE</span>\"</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-o</span> <span class=\"token string\">\"<span class=\"token variable\">$OUTPUT</span>/%(uploader)s_%(id)s.%(ext)s\"</span> <span class=\"token punctuation\">\\</span>\n--write-info-json --write-thumbnail --embed-thumbnail <span class=\"token punctuation\">\\</span>\n--merge-output-format mp4<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"7-🕒-定时下载任务（Windows-示例）\"><a href=\"#7-🕒-定时下载任务（Windows-示例）\" class=\"headerlink\" title=\"7. 🕒 定时下载任务（Windows 示例）\"></a>7. 🕒 定时下载任务（Windows 示例）</h2><ol>\n<li>写一个 <code>.bat</code> 脚本：<code>auto_download.bat</code></li>\n<li>打开计划任务 -&gt; 创建基本任务 -&gt; 设置定时执行 <code>.bat</code></li>\n</ol>\n<hr>\n<h2 id=\"8-🔑-私密视频下载（TikTok-登录）\"><a href=\"#8-🔑-私密视频下载（TikTok-登录）\" class=\"headerlink\" title=\"8. 🔑 私密视频下载（TikTok 登录）\"></a>8. 🔑 私密视频下载（TikTok 登录）</h2><h3 id=\"方法：\"><a href=\"#方法：\" class=\"headerlink\" title=\"方法：\"></a>方法：</h3><ol>\n<li>登录 TikTok 网页</li>\n<li>使用浏览器插件导出 Cookie（如 EditThisCookie）</li>\n<li>保存为 <code>cookies.txt</code></li>\n<li>命令中加参数：</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yt-dlp <span class=\"token parameter variable\">--cookies</span> cookies.txt https://www.tiktok.com/<span class=\"token punctuation\">..</span>.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"9-🧠-高级技巧：GUI-API-集成\"><a href=\"#9-🧠-高级技巧：GUI-API-集成\" class=\"headerlink\" title=\"9. 🧠 高级技巧：GUI / API 集成\"></a>9. 🧠 高级技巧：GUI / API 集成</h2><ul>\n<li>GUI 工具：<code>yt-dlg</code>（<a href=\"https://github.com/oleksis/ytdl-gui%EF%BC%89\">https://github.com/oleksis/ytdl-gui）</a></li>\n<li>与 Python 脚本结合（通过 <code>subprocess.run</code> 调用 yt-dlp）</li>\n<li>使用 <code>--print</code> + <code>--dump-json</code> 获取结构化数据用于网站抓取分析</li>\n</ul>\n<hr>\n<h2 id=\"10-🧯-常见问题汇总\"><a href=\"#10-🧯-常见问题汇总\" class=\"headerlink\" title=\"10. 🧯 常见问题汇总\"></a>10. 🧯 常见问题汇总</h2><table>\n<thead>\n<tr>\n<th>问题</th>\n<th>解决方案</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>HTTP 403 Forbidden</td>\n<td>添加代理或 cookies</td>\n</tr>\n<tr>\n<td>视频 ID 错误或跳转</td>\n<td>确保 URL 为标准 TikTok 网页格式</td>\n</tr>\n<tr>\n<td>格式不兼容</td>\n<td>使用 <code>--merge-output-format mp4</code></td>\n</tr>\n<tr>\n<td>速度慢</td>\n<td>使用代理 <code>--proxy</code>，或添加并发参数</td>\n</tr>\n</tbody></table>\n",
            "tags": [
                "下载"
            ]
        }
    ]
}